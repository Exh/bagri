------------------------------------------------------------------------
--  (C) Copyright IBM Corp. 2006
--  (C) Copyright Furtwangen University 2008
--
--  This program is made available under the terms of the Common Public 
--  License 1.0 as published by the Open Source Initiative (OSI). 
--  http://www.opensource.org/licenses/cpl1.0.php
------------------------------------------------------------------------

--##############################################################################
--# Return a customer profile for the specified customer.
--##############################################################################

SELECT XMLQUERY
(
'declare default element namespace "http://tpox-benchmark.com/custacc";
for $cust in /Customer
return 
        <Customer_Profile CUSTOMERID="{$cust/@id}">
                {$cust/Name}
                {$cust/DateOfBirth}
                {$cust/Gender}
                {$cust/CountryOfResidence}
                {$cust/Languages}
                {$cust/Addresses}
                {$cust/EmailAddresses}
        </Customer_Profile>'
PASSING cadoc
RETURNING CONTENT
) 
FROM "custacc"
WHERE XMLEXISTS
('declare default element namespace "http://tpox-benchmark.com/custacc";
/Customer[@id=|1]' PASSING cadoc)
%


